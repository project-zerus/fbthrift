cc_library(
  name = 'cpp',
  extra_cppflags = [
    '-Wno-sign-compare',
    '-Wno-unused-result',
    '-Wno-vla',
  ],
  srcs = [
    'EventHandlerBase.cpp',
    'Thrift.cpp',
    'TApplicationException.cpp',
    'VirtualProfiling.cpp',
    'ShutdownSocketSet.cpp',

    'async/TAsyncServerSocket.cpp',
    'async/TAsyncSignalHandler.cpp',
    'async/TAsyncSocket.cpp',
    'async/TAsyncSocketFactory.cpp',
    'async/TAsyncSSLServerSocket.cpp',
    'async/TAsyncSSLSocket.cpp',
    'async/TAsyncSSLSocketFactory.cpp',
    'async/TAsyncTimeoutSet.cpp',
    'async/TAsyncUDPSocket.cpp',
    'async/TBinaryAsyncChannel.cpp',
    'async/TEventBaseManager.cpp',
    'async/TEventConnection.cpp',
    'async/TEventServer.cpp',
    'async/TEventTask.cpp',
    'async/TEventWorker.cpp',
    'async/TFramedAsyncChannel.cpp',
    'async/THeaderAsyncChannel.cpp',
    'async/THttpAsyncChannel.cpp',
    'async/TUnframedAsyncChannel.cpp',
    'async/TZlibAsyncChannel.cpp',

    'concurrency/Codel.cpp',
    'concurrency/Monitor.cpp',
    'concurrency/Mutex.cpp',
    'concurrency/NumaThreadManager.cpp',
    'concurrency/PosixThreadFactory.cpp',
    'concurrency/ThreadManager.cpp',
    'concurrency/TimerManager.cpp',
    'concurrency/Util.cpp',

    'processor/PeekProcessor.cpp',

    'protocol/TBase64Utils.cpp',
    'protocol/TDebugProtocol.cpp',
    'protocol/THeaderProtocol.cpp',
    'protocol/TJSONProtocol.cpp',
    'protocol/TMultiplexedProtocol.cpp',
    'protocol/TPhpSerializeProtocol.cpp',
    'protocol/TSimpleJSONProtocol.cpp',

    'server/TRpcTransportContext.cpp',
    'server/TServer.cpp',

    'server/example/TNonblockingServer.cpp',
    'server/example/TSimpleServer.cpp',
    'server/example/TThreadedServer.cpp',
    'server/example/TThreadPoolServer.cpp',

    'ssl/SSLUtils.cpp',

    'transport/TBufferTransports.cpp',
    'transport/TFDTransport.cpp',
    'transport/TFileTransport.cpp',
    'transport/THeader.cpp',
    'transport/THeaderTransport.cpp',
    'transport/THttpClient.cpp',
    'transport/THttpServer.cpp',
    'transport/THttpTransport.cpp',
    'transport/TServerSocket.cpp',
    'transport/TSimpleFileTransport.cpp',
    'transport/TSocket.cpp',
    'transport/TSocketPool.cpp',
    'transport/TSSLServerSocket.cpp',
    'transport/TSSLSocket.cpp',
    'transport/TTransportException.cpp',
    'transport/TTransportUtils.cpp',
    'transport/TZlibTransport.cpp',

    'util/FdUtils.cpp',
    'util/PausableTimer.cpp',
    'util/ScopedServerThread.cpp',
    'util/ServerCreatorBase.cpp',
    'util/SocketRetriever.cpp',
    'util/SyncServerCreator.cpp',
    'util/TEventServerCreator.cpp',
    'util/THttpParser.cpp',
    'util/TNonblockingServerCreator.cpp',
    'util/TThreadedServerCreator.cpp',
    'util/VarintUtils.cpp',

    'util/kerberos/Krb5Util.cpp',
    'util/kerberos/Krb5OlderVersionStubs.cpp',
    'util/kerberos/Krb5CredentialsCacheManager.cpp',
    'util/kerberos/Krb5CCacheStore.cpp',
    'util/kerberos/Krb5Tgts.cpp',
  ],
  deps = [
    '#com_err',
    '#dl',
    '#gssapi_krb5',
    '#krb5',
    '#numa',
    '#pthread',
    '#rt',
    '//fbthrift:headers',
  ]
)
